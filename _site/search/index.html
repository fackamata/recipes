<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta charset="utf-8">
    <meta name="description" content="Un simple site de recette de famille"/>
    <title>recherche</title>
    <link rel="stylesheet" href="/assets/css/main.css">
  </head>
  <body>

    <nav class="main-navigation">
  <ul class="main-navigation__list">
    <li class="main-navigation__list__item">
      <a href="/" 
      class="main-navigation__link ">
      Recettes</a>
    </li>
    <li class="main-navigation__list__item">
      <a href="/apero/" 
      class="main-navigation__link ">
      Apéro</a>
    </li>
    <li class="main-navigation__list__item">
      <a href="/plat/" 
      class="main-navigation__link ">
      Plat</a>
    </li>
    <li class="main-navigation__list__item">
      <a href="/dessert/" 
      class="main-navigation__link ">
      Dessert</a>
    </li>
    <li class="main-navigation__list__item">
      <a href="/cuisine/" 
      class="main-navigation__link ">
      cuisine</a>
    </li>
    <li class="main-navigation__list__item">
      <a href="/autre/" 
      class="main-navigation__link ">
      autre</a>
    </li>
    <li class="main-navigation__list__item">
      <a href="/cosmetique/" 
      class="main-navigation__link ">
      cosmétique</a>
    </li>
    <li class="main-navigation__list__item">
      <a href="/search/" 
      class="main-navigation__link ">
      <img src="/assets/img/search.png" alt="search icon">    </a>
    </li>
  </ul>

  <button id="burgerBtn">
    <div class="menu-bar"></div>
    <div class="menu-bar"></div>
    <div class="menu-bar"></div>
  </button>
</nav>

    <h1>Recherche</h1>

    <main>
      <p class="searchText">recherche d'un ingrédient dans les recettes, minimum 3 charactères</p>

<!-- Html Elements for Search -->
<div id="search-container">
  <input type="search" id="search-bar" placeholder=" Ingredient ...">
  <idv id="search-results"></idv>
  </div>

<script type="application/json" id="search-data">[
  
    {
      "title"    : "houmous",
      "url"      : "/recipes/lisa/houmous",
      "date"     : "07 Jan 2022",
      "ingredient" : { 
         
        "pois chiche" : "250g"
        ,  
        "ail" : "2 gousse"
        ,  
        "tahin" : "2 càS"
        ,  
        "citron" : "3 4 càS"
        ,  
        "jus de pois chiche de la boite" : "2 càS"
         },
      "ingredientMarinade" : { 
        }
     
    } ,
  
    {
      "title"    : "tom kha gaï",
      "url"      : "/recipes/marlene/tomKhaGai",
      "date"     : "07 Jan 2022",
      "ingredient" : { 
         
        "poulet" : "400g"
        ,  
        "lait de coco" : "6 mug (moitier eau/coco)"
        ,  
        "galanga" : "1 pouce"
        ,  
        "citronelle" : "3 tige coupé à 45°"
        ,  
        "oignon" : "1 gros"
        ,  
        "keffir" : "6 feuilles"
        ,  
        "piment thaï" : "5"
        ,  
        "citron vert" : "4 càS"
        ,  
        "tomate" : "2"
        ,  
        "champignon" : "200g"
        ,  
        "sucre de palme" : "1 càc"
         },
      "ingredientMarinade" : { 
        }
     
    } ,
  
    {
      "title"    : "falafel",
      "url"      : "/recipes/marlene/falafel",
      "date"     : "07 Feb 2022",
      "ingredient" : { 
         
        "pois chiche" : "500g"
        ,  
        "ail" : "3 4 gousse"
        ,  
        "oignon" : "1/2"
        ,  
        "bicarbonate de soude" : "1 càc"
        ,  
        "graines de sésame dorés" : "1 càS"
        ,  
        "persil (ou menthe/coriandre, ou un mélange)" : "1 bouquet"
        ,  
        "cumin" : "2 càc"
        ,  
        "coriandre en poudre" : "2 càc"
        ,  
        "piment de cayenne" : "pincée (facultatif)"
        ,  
        "sel et poivre" : "pincée"
         },
      "ingredientMarinade" : { 
        }
     
    } ,
  
    {
      "title"    : "masque anticernes",
      "url"      : "/recipes/marlene/masqueAnticerne",
      "date"     : "05 Mar 2022",
      "ingredient" : { 
         
        "marc de café" : "1 cuillères à soupe"
        ,  
        "yaourt nature ou fromage blanc" : "2 cuillères à café"
        ,  
        "citron frais" : "quelques gouttes"
         },
      "ingredientMarinade" : { 
        }
     
    } ,
  
    {
      "title"    : "crêpe",
      "url"      : "/recipes/marlene/crepe",
      "date"     : "07 Mar 2022",
      "ingredient" : { 
         
        "farine" : "250g"
        ,  
        "lait" : "500ml"
        ,  
        "oeuf" : "4"
        ,  
        "sucre" : "2 càS"
        ,  
        "beurre fondu" : "50g"
         },
      "ingredientMarinade" : { 
        }
     
    } ,
  
    {
      "title"    : "tiramisu",
      "url"      : "/recipes/marlene/tiramisu",
      "date"     : "07 Mar 2022",
      "ingredient" : { 
         
        "mascarpone" : "250g"
        ,  
        "sucre" : "150g"
        ,  
        "oeuf" : "4"
        ,  
        "café" : "500ml"
        ,  
        "cacao en poudre" : "un peu"
        ,  
        "biscuit cuillère" : "1 packet"
         },
      "ingredientMarinade" : { 
        }
     
    } ,
  
    {
      "title"    : "muffin",
      "url"      : "/recipes/marlene/muffin",
      "date"     : "22 Mar 2022",
      "ingredient" : { 
         
        "beurre mou" : "150g"
        ,  
        "chocolat" : "100g"
        ,  
        "oeuf" : "2"
        ,  
        "sucre" : "200g"
        ,  
        "farine" : "300g"
        ,  
        "lait" : "300g"
        ,  
        "levure" : "1 sachet"
        ,  
        "sel" : "1 pincée"
         },
      "ingredientMarinade" : { 
        }
     
    } ,
  
    {
      "title"    : "poulet korma",
      "url"      : "/recipes/lisa/chickenKorma",
      "date"     : "24 Mar 2022",
      "ingredient" : { 
         
        "oignon" : "2"
        ,  
        "clou de girofle" : "3"
        ,  
        "cardamone" : "1"
        ,  
        "cannelle" : "1 morceau"
        ,  
        "laurier" : "1 feuille"
        ,  
        "garam masala" : "1/2 càc"
        ,  
        "coriandre" : "1,1/2 càc"
        ,  
        "piment" : "selon le gout"
         },
      "ingredientMarinade" : { 
         
        "poulet" : "500g"
        ,  
        "yaourt à la grecque" : "1 pot"
        ,  
        "ail" : "2 gousses"
        ,  
        "cardamone pilée" : "1 càc"
        ,  
        "cumin" : "1 càc"
        ,  
        "canelle" : "1 càc"
        ,  
        "paprika" : "1 càc"
        ,  
        "garam masala" : "1 càc"
        ,  
        "gimgembre" : "1 càc"
        ,  
        "noix de cajou coupée" : "1/2 mug"
        ,  
        "curcuma" : "1/4 càc"
         }
     
    } ,
  
    {
      "title"    : "brownies",
      "url"      : "/recipes/marlene/brownies",
      "date"     : "27 Mar 2022",
      "ingredient" : { 
         
        "oeuf" : "4"
        ,  
        "sucre" : "200g"
        ,  
        "chocolat" : "200g"
        ,  
        "beurre" : "200g"
        ,  
        "farine" : "100g"
        ,  
        "noix" : "1 bol"
         },
      "ingredientMarinade" : { 
        }
     
    } ,
  
    {
      "title"    : "fondant au chocolat",
      "url"      : "/recipes/marlene/fondantAuChocolat",
      "date"     : "27 Mar 2022",
      "ingredient" : { 
         
        "beurre" : "100g"
        ,  
        "chocolat noir" : "100g"
        ,  
        "sucre" : "100g"
        ,  
        "farine" : "60g"
        ,  
        "oeuf" : "2"
         },
      "ingredientMarinade" : { 
        }
     
    } ,
  
    {
      "title"    : "pâte sablée",
      "url"      : "/recipes/marlene/pateSable",
      "date"     : "27 Mar 2022",
      "ingredient" : { 
         
        "farine" : "250g"
        ,  
        "beurre" : "125g"
        ,  
        "sucre" : "125g"
        ,  
        "oeuf" : "1"
         },
      "ingredientMarinade" : { 
        }
     
    } ,
  
    {
      "title"    : "meringue",
      "url"      : "/recipes/marlene/meringue",
      "date"     : "28 Mar 2022",
      "ingredient" : { 
         
        "blanc d'oeuf" : "1"
        ,  
        "sucre" : "50g"
         },
      "ingredientMarinade" : { 
        }
     
    } ,
  
    {
      "title"    : "Butternut et patate douce aux épices",
      "url"      : "/recipes/marlene/butternutEtPatateDouce",
      "date"     : "01 Apr 2022",
      "ingredient" : { 
         
        "butternut" : "1"
        ,  
        "patate douce" : "3"
        ,  
        "oignon rouge" : "1"
        ,  
        "épice colombo" : "50g"
        ,  
        "amande" : "3"
        ,  
        "noisette" : "3"
        ,  
        "sel" : "1 pincée"
        ,  
        "huile d'olive" : "3 cuillère à soupe"
         },
      "ingredientMarinade" : { 
        }
     
    } ,
  
    {
      "title"    : "truite sauce échalotes vin blanc",
      "url"      : "/recipes/marlene/truiteSauceEchalotes",
      "date"     : "01 Apr 2022",
      "ingredient" : { 
         
        "filet de truite" : "600g"
        ,  
        "beurre" : "20g"
        ,  
        "huile d'olive" : "1 filet"
         },
      "ingredientMarinade" : { 
        }
     
    } ,
  
    {
      "title"    : "déodorant",
      "url"      : "/recipes/marlene/deodorant",
      "date"     : "05 Apr 2022",
      "ingredient" : { 
         
        "huile de coco" : "3 càS"
        ,  
        "Bicarbonate de soude (fin)" : "3 càS"
        ,  
        "fécule (type Maïzena)" : "3 càS"
         },
      "ingredientMarinade" : { 
        }
     
    } 
  
]</script>
  
<script>
  var searchData = JSON.parse(document.getElementById('search-data').textContent);
  console.log(searchData)
  var searchResultList = document.getElementById('search-results');
  var searchInput = document.getElementById('search-bar');

  var updateSearchResults = function(e){
    var query = e.target.value.toLowerCase();
    if(query.trim() !== '' && query.length > 2){
      searchResultList.innerHTML = '';
      for (let i  in searchData){
        var searchItem = searchData[i];

        // search by ingredient, 
        for (let ingredient in searchItem.ingredient){
          if (ingredient.toLowerCase().includes(query)){
            var searchLink = document.createElement('a');
            var searchContent = document.createTextNode(searchItem.title);
            searchLink.setAttribute('href', searchItem.url);
            searchLink.appendChild(searchContent)
            searchResultList.appendChild(searchLink)
          }
        }
        // search by ingredient in marinade, 
        for (let ingredientMarinade in searchItem.ingredientMarinade){
          if (ingredientMarinade.toLowerCase().includes(query)){
            var searchLink = document.createElement('a');
            var searchContent = document.createTextNode(searchItem.title);
            searchLink.setAttribute('href', searchItem.url);
            searchLink.appendChild(searchContent)
            searchResultList.appendChild(searchLink)
          }
        }
      }
    }
  };
  searchInput.addEventListener('keyup', updateSearchResults );
</script>
    </main>

    <script src="/assets/js/app.js"></script>
    <script src="/assets/js/table.js"></script>
  </body>
</html>
